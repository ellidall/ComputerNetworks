### Демонстрация работы приложения в директории **[screenshots](./screenshots)**


# Документация по SMTP-клиенту на C++

## Описание использованного SMTP-сервера

Для отправки электронной почты используется публичный SMTP-сервер **`smtp.mail.ru`** на порту **587**.

Сервер поддерживает стандартный протокол **SMTP (RFC 5321)** с ключевыми расширениями:
- **`STARTTLS`** — для перехода от незашифрованного к защищённому TLS-соединению,
- **`AUTH LOGIN`** и **`AUTH PLAIN`** — для аутентификации пользователя,
- **`8BITMIME`**, **`SMTPUTF8`** — для корректной передачи не-ASCII символов.

Аутентификация возможна **только с использованием пароля приложения**, который генерируется отдельно в панели управления Mail.ru или VK WorkSpace. Обычный пароль от почтового ящика **не принимается** по соображениям безопасности.

После успешной отправки сервер возвращает код **`250 OK`** и уникальный идентификатор сообщения (например, `1vYhYR-00000000G5w-3ggq`), подтверждая постановку письма в очередь на доставку.

---

## Архитектура

Клиент реализован как **консольное приложение на C++20** и использует следующие технологии:

- **POSIX-сокеты** (`socket`, `connect`, `read`, `write`, `close`) — для установки и управления TCP-соединением,
- **Библиотека OpenSSL** — для выполнения TLS-шифрования после команды `STARTTLS`,
- **Собственная реализация Base64-кодирования** — для передачи логина и пароля в рамках механизма `AUTH LOGIN`.

### Последовательность SMTP-диалога:
1. Установка TCP-соединения с `smtp.mail.ru:587`.
2. Получение приветствия (`220`) и отправка команды `EHLO`.
3. Проверка наличия `STARTTLS` в ответе сервера.
4. Выполнение команды `STARTTLS` и инициализация TLS-сессии через OpenSSL.
5. Повторная отправка `EHLO` по зашифрованному каналу.
6. Аутентификация:
    - отправка `AUTH LOGIN`,
    - передача логина в формате Base64,
    - передача пароля в формате Base64.
7. Отправка команд:
    - `MAIL FROM:<...>`,
    - `RCPT TO:<...>`,
    - `DATA`.
8. Передача тела письма с корректным завершением: строка, содержащая только точку (`.`), завершённая `\r\n`.
9. Завершение сессии командой `QUIT`.

На каждом этапе клиент проверяет SMTP-код ответа (`220`, `250`, `354`, `235` и др.), обеспечивая надёжность и соответствие протоколу.

---

## Инструкция по сборке и запуску

### Требования
- Операционная система: **Linux** (Ubuntu/Debian и др.) или **macOS**.
- Компилятор с поддержкой **C++20** (например, `g++` версии 10+).
- Установленная библиотека **OpenSSL** (в большинстве дистрибутивов — по умолчанию; при необходимости: `sudo apt install libssl-dev`).
- Доступ к почтовому ящику на **Mail.ru** или **VK WorkSpace** с возможностью создания **пароля приложения**.

### Сборка
1. Убедитесь, что в текущей директории находятся файлы:
    - `smtp.cpp`
    - `CMakeLists.txt`
2. Выполните в терминале:
   ```bash
   cmake -S . -B build
   cmake --build build